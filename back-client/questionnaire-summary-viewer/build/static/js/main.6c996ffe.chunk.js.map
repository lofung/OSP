{"version":3,"sources":["App.js","index.js"],"names":["App","useState","summaryList","setSummaryList","deleteQ","token","a","window","confirm","fetch","method","deleteTodo","console","log","loadSummaryList","error","message","response","json","jsonData","data","useEffect","className","style","map","entry","idx","questionnaire_name","active","disabled","create_date","modi_date","target","href","onClick","location","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6c996ffe.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './App.css'\n\nfunction App() {\n  const [summaryList, setSummaryList] = useState([{\"token\":\"abfs2357\",\"questionnaire_name\":\"first_questionnaire\",\"active\":true,\"create_date\":\"2021/1/25\",\"modi_date\":\"2021/1/25\",\"content_json\":null},{\"token\":\"abfs2358\",\"questionnaire_name\":\"first_questionnaire\",\"active\":true,\"create_date\":\"2021/1/25\",\"modi_date\":\"2021/01/26\",\"content_json\":[{\"question\":\"hello wold can json work?\",\"type\":\"textbox\",\"options\":\"\",\"required\":false},{\"question\":\"gg it works!\",\"type\":\"mc\",\"options\":\" yes; no; i dunno;\",\"required\":false},{\"question\":\"can edit API work?\",\"type\":\"likert\",\"options\":\"1-10\",\"required\":false},{\"question\":\"does redirect work? try\",\"type\":\"likert\",\"options\":\"agree-disagree-5\",\"required\":false}]},{\"token\":\"j6w2x1qi\",\"questionnaire_name\":\"test create q\",\"active\":true,\"create_date\":\"2021/01/26\",\"modi_date\":\"2021/01/26\",\"content_json\":[{\"question\":\"are you fat?\",\"type\":\"textbox\",\"options\":\"\"}]},{\"token\":\"vr0f4djB\",\"questionnaire_name\":\"test create q and server\",\"active\":true,\"create_date\":\"2021/01/26\",\"modi_date\":\"2021/01/26\",\"content_json\":[{\"question\":\"are you very fat?\",\"type\":\"textbox\",\"options\":\"\"}]},{\"token\":\"oLjLAXl1\",\"questionnaire_name\":\"multi field input test\",\"active\":true,\"create_date\":\"2021/01/26\",\"modi_date\":\"2021/01/26\",\"content_json\":[{\"question\":\"textbox?\",\"type\":\"textbox\",\"options\":\"\"},{\"question\":\"mc?\",\"type\":\"mc\",\"options\":\"fat; very fat; not fat;\"},{\"question\":\"agree?\",\"type\":\"likert\",\"options\":\"agree-disagree-5\"},{\"question\":\"1-10 score?\",\"type\":\"likert\",\"options\":\"1-10\"}]}]);\n\n  const deleteQ = async (token) => {\n    //trigger delete row in database, BUT DO NOT DELETE THE ATTACHED DATABASE\n    //console.log(\"hello world \" + token)\n    if (window.confirm(\"Are you sure you want to delete? You may deactivate the questionnaire first and delete when you are sure!\")){\n      //ask before delete\n      try {\n          const deleteTodo = await fetch (`/api/v1/editscheme/${token}`,{\n              method: \"DELETE\"\n          });\n          console.log(deleteTodo);\n          await loadSummaryList();\n      } catch (err) {\n          console.error(err.message)\n      }\n  }\n  }\n\n  const loadSummaryList = async () => {\n    //load the whole main database of info\n    //console.log(\"load! air!\")\n    try {\n      const response = await fetch('/api/v1/questionnairesummary');\n      const jsonData = await response.json();\n      setSummaryList(jsonData.data)\n      if (!jsonData.data) {setSummaryList([])} //if no data then give empty array to avoid breaking whole site\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  useEffect(() => {\n    loadSummaryList();\n  }, [])\n\n  return (\n    <div className=\"container\">\n      <h1>View, activate/deactivate or delete questionnaires</h1>\n      <br />\n      <table style={{\"border\": \"1px solid black\"}}>\n        <thead>\n          <tr>\n            <th>Token</th>\n            <th>Questionnaire Name</th>\n            <th>Active</th>\n            <th>Creation Date</th>\n            <th>Last Modification</th>\n            <th>{/*view*/}</th>\n            <th>{/*edit*/}</th>\n            <th>{/*delete*/}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {summaryList?summaryList.map((entry, idx) => \n            <tr key={idx+entry.token}>\n              <td>{entry.token}</td>\n              <td>{entry.questionnaire_name}</td>\n              <td>\n                <span style={{\"display\":\"block\", \"textAlign\":\"center\"}}>{entry.active===true?\"active\":entry.active===false?\"deactived\":\"error!!\" /* cannot show boolean in table*/}</span>\n                <button disabled>Activate</button>{/* the activate deactivate part is easy but no time to make */}\n                <button disabled>Deactivate</button>{/* allow student to read but disallow submit when deactivate */}\n              </td>\n              <td>{entry.create_date}</td>\n              <td>{entry.modi_date}</td>\n              <td><a target='_blank' href={'/front/qr/'+entry.token /* _blank opens new window */}><button>QR</button></a></td>\n              <td><a target='_blank' href={'/front/'+entry.token}><button>Preview</button></a></td>\n              <td><a target='_blank' href={'/bd/admin-config/view-result/'+entry.token}><button>Results</button></a></td>\n              <td><button onClick={() => {window.location.href = '/bd/admin-config/build-edit/'}}>Edit</button></td>\n              <td><button onClick={() => deleteQ(entry.token)}>DELETE</button></td>\n            </tr>\n          ):<tr><td>No records!</td></tr> /* return no record if there is no summary drawable*/\n          /* this part does not work yet */}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}