(this["webpackJsonpquestionnaire-maker"]=this["webpackJsonpquestionnaire-maker"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),i=n.n(r),o=n(9),c=n.n(o),s=n(2),l=n.n(s),u=n(4),d=n(6),p=n(8);n(16);var b=function(){var e=Object(r.useState)([{question:"",type:"textbox",options:""}]),t=Object(p.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)([]),c=Object(p.a)(o,2),s=c[0],b=c[1];function x(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"/"+n+"/"+t}function j(){return(j=Object(d.a)(l.a.mark((function e(){var t,a,r,o,c,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Object(u.a)(n)).forEach((function(e){"mc"!==e.type&&"likert"!==e.type&&(e.options="")})),i(t),a=document.getElementById("token").value,r=document.getElementById("name").value,o="",c="",n.forEach((function(e,t){o="textbox"===e.type?o.concat(e.question," varchar(100) "):o.concat(e.question," varchar(10) "),c=c.concat("$".concat(t+1," "))})),"create"!==document.getElementById("selectMode").value){e.next=22;break}return e.prev=9,e.next=12,fetch("/api/v1/buildnewscheme/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,questionnaire_name:r,active:!0,create_date:x(),modi_date:x(),content_json:t,questionList:o,moneySignList:c})});case 12:s=e.sent,alert("Creation successful! Redirect to review"),window.location.href=s.url,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.error(e.t0);case 20:e.next=33;break;case 22:return e.prev=22,e.next=25,fetch("/api/v1/editscheme/"+a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,questionnaire_name:r,active:!0,create_date:x(),modi_date:x(),content_json:t,questionList:o,moneySignList:c})});case 25:d=e.sent,alert("Update successful! Redirect to review"),window.location.href=d.url,e.next=33;break;case 30:e.prev=30,e.t1=e.catch(22),console.error(e.t1);case 33:case"end":return e.stop()}}),e,null,[[9,17],[22,30]])})))).apply(this,arguments)}function m(e,t,a){var r=Object(u.a)(n);r[t][a]=e.target.value,i(r),"type"===a&&"mc"===e.target.value?(e.target.nextSibling.disabled=!1,e.target.nextSibling.placeholder="Seperate MC options with ;"):"type"===a&&"likert"===e.target.value?(e.target.nextSibling.disabled=!1,e.target.nextSibling.placeholder="Select from dropdown"):"type"===a&&(e.target.nextSibling.disabled=!0,e.target.nextSibling.placeholder="",i(r)),"options"!==a||"mc"!==e.target.previousSibling.value&&"likert"!==e.target.previousSibling.value?"type"===a&&"textbox"===e.target.value?v(t,"","textbox"):"type"!==a||"mc"!==e.target.value&&"likert"!==e.target.value||v(t,e.target.nextSibling.value,e.target.value):v(t,e.target.value,e.target.previousSibling.value)}function v(e,t,n){var a=document.getElementById("sample"+e);if(a.innerHTML="","1-10"===t){["1","2","3","4","5","6","7","8","9","10"].forEach((function(e){var t=document.createElement("span");t.classList.add("tag"),t.classList.add("light-blue"),t.innerText=e,a.appendChild(t)}))}else if("agree-disagree-5"===t){["Strongly disagree","Disagree","Neutral","Agree","Strongly Agree"].forEach((function(e){var t=document.createElement("span");t.classList.add("tag"),t.classList.add("light-blue"),t.innerText=e,a.appendChild(t)}))}else{t.split(";").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim()})).forEach((function(e){var t=document.createElement("span");t.classList.add("tag"),t.innerText=e,a.appendChild(t)}))}}function g(){document.getElementById("reloadToken").disabled=!1;var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}(8);document.getElementById("token").value=e,s.forEach((function(t){t.token===e?g():document.getElementById("token").value=e}))}var h=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/get-all-token/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,b(n.data),n.data.forEach((function(e,t){var n=document.createElement("option");n.value=e.token,n.innerHTML=e.token+" - "+e.questionnaire_name,document.getElementById("selectMode").add(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(),e.prev=1,e.next=4,fetch("/api/v1/questionnaire-live/"+t.target.value);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=a.data.content_json,document.getElementById("name").value=a.data.questionnaire_name,document.getElementById("token").value=a.data.token,o=r,console.log(o),console.log(typeof o),i(o),document.querySelectorAll("#typeBox").forEach((function(e){"likert"!==e.value&&"mc"!==e.value||(e.nextSibling.disabled=!1)})),y(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){"create"===document.getElementById("selectMode").value?(g(),document.getElementById("reloadToken").disabled=!1):document.getElementById("reloadToken").disabled=!0};return Object(r.useEffect)((function(){g(),h()}),[]),Object(a.jsxs)("div",{className:"container",style:{margin:"25px"},children:[Object(a.jsx)("h1",{children:"Build a questionnaire"}),Object(a.jsx)("div",{children:"Select questionnaire to edit:"}),Object(a.jsx)("select",{className:"token-dropdown",id:"selectMode",style:{width:"300px"},onChange:function(e){return f(e)},children:Object(a.jsx)("option",{value:"create",children:"Create new questionnaire"})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:"Questionnaire Name:"}),Object(a.jsx)("input",{type:"text",id:"name",name:"name"}),Object(a.jsx)("div",{children:"Generate random token:"}),Object(a.jsx)("input",{type:"text",id:"token",name:"token",disabled:!0})," ",Object(a.jsx)("button",{id:"reloadToken",onClick:function(){return g()},children:"Reload"}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{margin:"15px",border:"1px solid"},children:[Object(a.jsxs)("div",{style:{margin:"15px"},children:[n.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{margin:"15px"},children:[Object(a.jsx)("input",{type:"text",name:"question",value:e.question,onChange:function(e){return m(e,t,"question")}}),Object(a.jsxs)("select",{name:"type",className:"typeBox",value:e.type,onChange:function(e){return m(e,t,"type")},children:[Object(a.jsx)("option",{value:"textbox",children:"Textbox"}),Object(a.jsx)("option",{value:"mc",children:"Multiple Choice"}),Object(a.jsx)("option",{value:"likert",children:"Likert"})]}),Object(a.jsx)("input",{list:"dropdown-in-detail-"+t,type:"text",name:"options",value:e.options,onChange:function(e){return m(e,t,"options")},disabled:!0}),Object(a.jsxs)("datalist",{id:"dropdown-in-detail-"+t,children:[Object(a.jsx)("option",{value:"1-10",children:"likert 1-10"}),Object(a.jsx)("option",{value:"agree-disagree-5",children:"agree-disagree-5"})]}),Object(a.jsx)("button",{onClick:function(e){return function(e,t){var a=Object(u.a)(n);a.splice(t,0,{question:"",type:"textbox",options:""}),i(a)}(0,t)},children:"+"})]}),Object(a.jsx)("div",{id:"sample"+t})]},t)})),Object(a.jsx)("button",{onClick:function(){i([].concat(Object(u.a)(n),[{question:"",type:"textbox",options:""}]))},children:"+"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}),Object(a.jsx)("button",{onClick:function(){return function(){return j.apply(this,arguments)}()},children:"Submit"}),JSON.stringify(n)]})};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(b,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d7eabd85.chunk.js.map