(this["webpackJsonpquestionnaire-reader"]=this["webpackJsonpquestionnaire-reader"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),i=n.n(a),c=n(9),s=n.n(c),o=(n(15),n(8)),u=n(3),l=n.n(u),d=n(7),p=n(5);n(17);var j=function(){var e=Object(a.useState)("Ordinary Questionnaire (Cannot fetch db - demo)"),t=Object(p.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)("vkkU2MmK"),s=Object(p.a)(c,2),u=s[0],j=s[1],b=Object(a.useState)([{question:"day?",type:"textbox",options:"",required:!1,answer:""},{question:"drinking?",type:"mc",options:"yes; no; i dunno;",required:!1,answer:""},{question:"like parents?",type:"likert",options:"1-10",required:!1,answer:""},{question:"like hk?",type:"likert",options:"agree-disagree-5",required:!1,answer:""}]),f=Object(p.a)(b,2),h=f[0],x=f[1];function v(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"/"+n+"/"+t}var O=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],h.forEach((function(e,n){t.push({question:e.question,answer:e.answer})})),n={name:document.getElementById("name").value,date:v(),answers:t},e.prev=3,e.next=6,fetch("/api/v1/postanswers/"+u.substring(0,8),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:e.sent,alert("input success, thank you for answering!!"),window.location.href="/",e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),g=function(e,t,n){return e.split(";").filter((function(e){return""!==e})).map((function(e,n){return Object(r.jsxs)("div",{style:{margin:"5px"},children:[Object(r.jsx)("input",{type:"checkbox",value:e,name:"q"+t,onChange:function(e){return function(e,t){var n=document.querySelectorAll("input[name=q".concat(e,"]:checked")),r=[];n.forEach((function(e){r.push(e.value)}));var a=Object(o.a)(h);a[e].answer=r,x(a)}(t)}}),Object(r.jsx)("label",{htmlFor:e,children:e})]},e+"-"+n)}))},m=function(e,t){var n=Object(o.a)(h);n[t].answer=e.target.value,x(n)},y=function(e,t,n,a){var i="";switch(e){case"textbox":i=Object(r.jsx)("input",{type:"text",id:"q"+n,onChange:function(e){return m(e,n)}});break;case"mc":i=Object(r.jsx)("div",{id:"q"+n,children:g(t,n)});break;case"likert":if("1-10"===t){for(var c=t.split("-"),s=parseInt(c[0]),o=parseInt(c[1]),u=[],l=s;l<o+1;l++)u.push(l);i=Object(r.jsxs)("select",{name:"q"+n,id:"q"+n,defaultValue:"default",onChange:function(e){return m(e,n)},children:[Object(r.jsx)("option",{value:"default",disabled:!0,children:"Select"}),u.map((function(e){return Object(r.jsx)("option",{value:e,children:e},e+"score")}))]})}if("agree-disagree-5"===t){i=Object(r.jsxs)("select",{name:"q"+n,id:"q"+n,defaultValue:"default",onChange:function(e){return m(e,n)},children:[Object(r.jsx)("option",{value:"default",disabled:!0,children:"Select"}),["Strongly Agree","Agree","Neutral","Disagree","Strongly Disagree"].map((function(e){return Object(r.jsx)("option",{value:e,children:e},e+"agree")}))]})}break;default:i="caught in default, contact developer"}return i},q=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,n=t.split("/"),r=n[n.length-1],j(r),e.prev=4,e.next=7,fetch("/api/v1/questionnaire-live/"+r);case 7:return a=e.sent,e.next=10,a.json();case 10:c=e.sent,s=c.data.content_json,i(c.data.questionnaire_name),j(c.data.token+" - load success"),x(s),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q()}),[]),Object(r.jsxs)("div",{className:"container",style:{margin:"15px"},children:[Object(r.jsx)("h1",{children:n}),"Token: ",Object(r.jsx)("input",{type:"text",value:u,disabled:!0}),Object(r.jsxs)("div",{className:"questionnaire-container",style:{margin:"15px",border:"1px solid"},children:[Object(r.jsx)("br",{}),"Name: ",Object(r.jsx)("input",{type:"text",id:"name"}),h.map((function(e,t){return Object(r.jsxs)("div",{className:"question-"+t+"-box",style:{margin:"10px"},children:[Object(r.jsxs)("div",{children:[t+1,". ",e.question]}),y(e.type,e.options,t,e.question)]},t+"box")}))]}),Object(r.jsx)("button",{onClick:function(){return O()},children:"Submit"}),Object(r.jsx)("br",{}),JSON.stringify(h)]})};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(j,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.ddf8bd8b.chunk.js.map